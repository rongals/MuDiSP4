sp {crai*propose*swap-carriers
   (state <s> ^name crai
              ^io.input-link.usrmap.user (^uid <uid1> ^carr (^cid <cid1>)) (^uid {<> <uid1> <uid2>} ^carr (^cid <cid2>))
              ^io.input-link.channels.coeff (^carr <cid1> ^user <uid1> ^value <v1>)
                                            (^carr <cid2> ^user <uid2> ^value <v2>)
                                            (^carr <cid2> ^user <uid1> ^value <sv1> > <v1>)
                                            (^carr <cid1> ^user <uid2> ^value <sv2> > <v2>)
              -^io.output-link.command <cmd>
              -^conflicts.carr <c>)
-->
   (<s> ^operator <op> + =)
   (<op> ^name swap-carriers
         ^u1 <uid1>
         ^c1 <cid1>
         ^u2 <uid2>
         ^c2 <cid2>)
}

sp {apply*swap-carriers
   (state <s> ^operator <op>
              ^io.output-link <ol>)
   (<op> ^name swap-carriers
         ^u1 <uid1>
         ^c1 <cid1>
         ^u2 <uid2>
         ^c2 <cid2>)
-->
  (<ol> ^command <cmd>)
  (<cmd> ^name swap-carriers
         ^u1 <uid1>
         ^c1 <cid1>
         ^u2 <uid2>
         ^c2 <cid2>)
}
